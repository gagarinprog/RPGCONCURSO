<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="InfraRPG â€“ Prepare-se para concursos de economia em formato RPG" />
  <title>InfraRPG â€“ RPG do Concurseiro</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0e1a" />

  <!-- Fontes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet" />

  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

<div id="app">
  <!-- Navbar -->
  <nav class="navbar">
    <span class="navbar-brand" id="btn-brand">
      <span class="icon">âš”ï¸</span>
      <span>InfraRPG</span>
    </span>
    <span class="navbar-version">v2.0.0</span>
  </nav>

  <!-- â”€â”€ Tela 1: SeleÃ§Ã£o de MatÃ©ria â”€â”€ -->
  <section id="subject-screen" class="screen">
    <h1>Escolha sua Batalha</h1>
    <p class="subtitle">Selecione uma matÃ©ria do edital para iniciar sua campanha</p>
    <div id="subject-grid" class="subject-grid"></div>
  </section>

  <!-- â”€â”€ Tela 2: SeleÃ§Ã£o de TÃ³pico â”€â”€ -->
  <section id="topic-screen" class="screen hidden">
    <button class="btn-back" id="btn-topic-back">â† Voltar</button>
    <h2 id="subject-title">MatÃ©ria</h2>
    <div id="topic-list" class="topic-list"></div>
  </section>

  <!-- â”€â”€ Tela 3: Jogo â”€â”€ -->
  <section id="game-screen" class="screen hidden">
    <!-- CabeÃ§alho da fase -->
    <div class="game-header">
      <div class="game-meta">
        <span id="topic-title"></span>
        <span id="phase-title">Fase 1</span>
      </div>
      <div class="hp-container">
        <div class="hp-label-row">
          <span>â¤ï¸ HP</span>
          <span id="hp-label">100/100</span>
        </div>
        <div class="hp-track"><div id="hp-bar" class="hp-fill" style="width:100%"></div></div>
      </div>
      <div class="phase-container">
        <div class="hp-label-row">
          <span>ğŸ¯ Fase</span>
          <span id="phase-label">0/5 corretas</span>
        </div>
        <div class="phase-track"><div id="phase-bar" class="phase-fill" style="width:0%"></div></div>
      </div>
    </div>

    <!-- Card da QuestÃ£o -->
    <div id="q-card">
      <p id="q-text">Carregando...</p>
    </div>

    <!-- BotÃµes de Resposta -->
    <div id="ans-btns" style="display:none">
      <button id="btn-true"  class="btn-answer btn-true">âœ“ CERTO</button>
      <button id="btn-false" class="btn-answer btn-false">âœ— ERRADO</button>
    </div>
  </section>
</div>

<!-- â”€â”€ Modal: Resultado â”€â”€ -->
<div id="result-modal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-box">
    <div id="result-icon" class="modal-icon"></div>
    <h2 id="result-title" class="modal-title"></h2>
    <div id="result-explanation" class="modal-explanation"></div>
    <p id="result-reference" class="modal-reference"></p>
    <div class="modal-actions">
      <button id="btn-continue" class="btn-primary">Continuar â†’</button>
    </div>
  </div>
</div>

<!-- â”€â”€ Modal: Fase ConcluÃ­da â”€â”€ -->
<div id="phase-modal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-box" style="text-align:center">
    <div class="modal-icon float">ğŸ†</div>
    <h2 class="modal-title neutral">Fase <span id="phase-complete-num"></span> ConcluÃ­da!</h2>
    <p style="color:var(--text-muted);margin-bottom:1rem">
      AvanÃ§ando para a Fase <strong id="next-phase-num"></strong>...
    </p>
    <div class="modal-actions">
      <button id="btn-next-phase" class="btn-primary">PrÃ³xima Fase â†’</button>
      <button id="btn-back-subjects" class="btn-secondary">Menu Principal</button>
    </div>
  </div>
</div>

<!-- â”€â”€ Modal: TÃ³pico Completo â”€â”€ -->
<div id="complete-modal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-box" style="text-align:center">
    <div class="modal-icon float">ğŸ–ï¸</div>
    <h2 class="modal-title" style="color:var(--accent-amber)">TÃ³pico Dominado!</h2>
    <p style="color:var(--text-muted);margin-bottom:1.2rem">
      VocÃª completou <strong id="complete-topic-name"></strong>.<br />
      Continue estudando para dominar todos os tÃ³picos!
    </p>
    <div class="modal-actions">
      <button id="btn-complete-back" class="btn-primary">Ver TÃ³picos</button>
    </div>
  </div>
</div>

<!-- â”€â”€ Modal: Game Over â”€â”€ -->
<div id="gameover-modal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-box" style="text-align:center">
    <div class="modal-icon">ğŸ’€</div>
    <h2 class="modal-title wrong">Derrota!</h2>
    <p style="color:var(--text-muted);margin-bottom:1rem">
      Seu HP chegou a zero. Estude a explicaÃ§Ã£o e tente novamente.
    </p>
    <div class="modal-actions">
      <button id="btn-retry" class="btn-danger">ğŸ”„ Tentar Novamente</button>
      <button id="btn-back-topics" class="btn-secondary">â† Voltar aos TÃ³picos</button>
    </div>
  </div>
</div>

<!-- Toast Container -->
<div id="toast-container" aria-live="polite"></div>

<!-- Scripts -->
<script src="data/database.js"></script>
<script src="js/constants.js"></script>
<script src="js/ui.js"></script>
<script src="js/game.js" type="module"></script>

<script>
  // Navbar brand â†’ menu principal
  document.getElementById('btn-brand').addEventListener('click', () => {
    if (typeof closeAllModals === 'function') closeAllModals();
    if (typeof showScreen === 'function') showScreen('subject-screen');
  });

  // Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(() => {});
  }
</script>
</body>
</html>
